# Webã‚µãƒ¼ãƒ“ã‚¹ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸

## æ¦‚è¦

æ ªå¼æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ ã‚’Webã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦æä¾›ã™ã‚‹ãŸã‚ã®è¨­è¨ˆæ›¸

## ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ãƒ¦ãƒ¼ã‚¶ãƒ¼                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP (8501)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Streamlit Dashboard                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   ãƒ›ãƒ¼ãƒ      â”‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹â”‚   å±¥æ­´      â”‚    â”‚
â”‚  â”‚(ä»Šæ—¥ã®æ¨å¥¨)  â”‚  (ã‚°ãƒ©ãƒ•)    â”‚ (éå»æ¨å¥¨)  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  - æ¨å¥¨å±¥æ­´èª­ã¿è¾¼ã¿ (JSON)                â”‚      â”‚
â”‚  â”‚  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆç®—                     â”‚      â”‚
â”‚  â”‚  - ã‚°ãƒ©ãƒ•ç”Ÿæˆ                             â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           APScheduler (ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  æ¯æ—¥ 09:00 JST:                          â”‚      â”‚
â”‚  â”‚    - ãƒ‡ãƒ¼ã‚¿å–å¾—                           â”‚      â”‚
â”‚  â”‚    - æ¨å¥¨éŠ˜æŸ„è¨ˆç®—                         â”‚      â”‚
â”‚  â”‚    - JSONä¿å­˜                             â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  data/reports/                            â”‚      â”‚
â”‚  â”‚    - recommendation_*.json                â”‚      â”‚
â”‚  â”‚    - portfolio_performance_*.png          â”‚      â”‚
â”‚  â”‚    - best_weights.json                    â”‚      â”‚
â”‚  â”‚                                            â”‚      â”‚
â”‚  â”‚  data/stock_cache/ (Parquet)              â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°

### 1. Streamlit Dashboard (web/app.py)

**ãƒšãƒ¼ã‚¸æ§‹æˆ:**

#### ğŸ“Š ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
- ä»Šæ—¥ã®æ—¥ä»˜ã¨å¸‚å ´çŠ¶æ³
- æœ¬æ—¥ã®æ¨å¥¨éŠ˜æŸ„ãƒªã‚¹ãƒˆï¼ˆä¸Šä½5éŠ˜æŸ„ï¼‰
- å„éŠ˜æŸ„ã®è©³ç´°æƒ…å ±:
  - éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ãƒ»åç§°
  - ç¾åœ¨ä¾¡æ ¼
  - ã‚¹ã‚³ã‚¢ï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ã€ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ã€å‡ºæ¥é«˜ã€ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼‰
  - ä¿¡é ¼åº¦
  - RSIã€ADXã€å‡ºæ¥é«˜æ¯”ç‡

#### ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒšãƒ¼ã‚¸
- ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªè³‡é‡‘æ¨ç§»ã‚°ãƒ©ãƒ•
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆ:
  - ç·ãƒªã‚¿ãƒ¼ãƒ³
  - å‹ç‡
  - ãƒ—ãƒ­ãƒ•ã‚£ãƒƒãƒˆãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼
  - æœ€å¤§ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³
- ãƒˆãƒƒãƒ—/ãƒ¯ãƒ¼ã‚¹ãƒˆãƒˆãƒ¬ãƒ¼ãƒ‰ä¸€è¦§

#### ğŸ“œ å±¥æ­´ãƒšãƒ¼ã‚¸
- éå»ã®æ¨å¥¨éŠ˜æŸ„ä¸€è¦§ï¼ˆæ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä»˜ãï¼‰
- å„æ¨å¥¨ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¿½è·¡
- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆCSVï¼‰

#### âš™ï¸ è¨­å®šãƒšãƒ¼ã‚¸ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š
- é‡ã¿èª¿æ•´
- é€šçŸ¥è¨­å®š

### 2. ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼ (web/scheduler.py)

**å®šæœŸå®Ÿè¡Œã‚¿ã‚¹ã‚¯:**

```python
# æ¯æ—¥ 9:00 JST - æ¨å¥¨éŠ˜æŸ„ç”Ÿæˆ
@scheduler.scheduled_job('cron', hour=9, minute=0, timezone='Asia/Tokyo')
def daily_recommendation():
    # scripts/run_daily_recommendation.py ã‚’å®Ÿè¡Œ
    pass

# æ¯é€±æœˆæ›œ 10:00 JST - æœ€é©åŒ–å®Ÿè¡Œï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
@scheduler.scheduled_job('cron', day_of_week='mon', hour=10, minute=0)
def weekly_optimization():
    # scripts/run_optimization.py ã‚’å®Ÿè¡Œ
    pass

# æ¯æ—¥ 18:00 JST - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å¯è¦–åŒ–
@scheduler.scheduled_job('cron', hour=18, minute=0)
def daily_performance_visualization():
    # scripts/visualize_portfolio_performance.py ã‚’å®Ÿè¡Œ
    pass
```

**æ©Ÿèƒ½:**
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ç‹¬ç«‹ã—ã¦å‹•ä½œ
- ãƒ­ã‚°è¨˜éŒ²
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- æ‰‹å‹•ãƒˆãƒªã‚¬ãƒ¼æ©Ÿèƒ½

### 3. ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ (web/data_manager.py)

**è²¬å‹™:**
- JSONèª­ã¿è¾¼ã¿/æ›¸ãè¾¼ã¿
- ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆç®—
- ã‚°ãƒ©ãƒ•ç”Ÿæˆã®çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

```python
class DataManager:
    def get_latest_recommendations(self) -> List[Dict]
    def get_recommendation_history(self, start_date, end_date) -> List[Dict]
    def get_portfolio_performance(self) -> Dict
    def get_performance_chart(self) -> matplotlib.Figure
```

## ãƒ‡ãƒ—ãƒ­ã‚¤æ§‹æˆ

### Dockeræ§‹æˆ

```yaml
# docker-compose.yml
services:
  web:
    build: .
    ports:
      - "8501:8501"
    volumes:
      - ./data:/app/data
      - ./config:/app/config
    environment:
      - TZ=Asia/Tokyo
    restart: unless-stopped

  scheduler:
    build: .
    command: python web/scheduler.py
    volumes:
      - ./data:/app/data
      - ./config:/app/config
    environment:
      - TZ=Asia/Tokyo
    restart: unless-stopped
```

### Dockerfile

```dockerfile
FROM python:3.11-slim

WORKDIR /app

# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ”ãƒ¼
COPY . .

# Streamlitè¨­å®š
RUN mkdir -p ~/.streamlit
COPY web/.streamlit/config.toml ~/.streamlit/

EXPOSE 8501

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒãƒ³ãƒ‰
CMD ["streamlit", "run", "web/app.py", "--server.port=8501", "--server.address=0.0.0.0"]
```

## é–‹ç™ºãƒ»é‹ç”¨ãƒ•ãƒ­ãƒ¼

### é–‹ç™ºç’°å¢ƒ

```bash
# 1. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# 2. Streamlitèµ·å‹•ï¼ˆé–‹ç™ºï¼‰
streamlit run web/app.py

# 3. ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼èµ·å‹•ï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
python web/scheduler.py
```

### æœ¬ç•ªç’°å¢ƒï¼ˆDockerï¼‰

```bash
# 1. ãƒ“ãƒ«ãƒ‰
docker-compose build

# 2. èµ·å‹•
docker-compose up -d

# 3. ãƒ­ã‚°ç¢ºèª
docker-compose logs -f

# 4. åœæ­¢
docker-compose down
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

1. **èªè¨¼**: Basicèªè¨¼ã¾ãŸã¯Streamlitã®authæ©Ÿèƒ½
2. **ãƒ‡ãƒ¼ã‚¿ä¿è­·**: volumeãƒã‚¦ãƒ³ãƒˆã§æ°¸ç¶šåŒ–
3. **APIåˆ¶é™**: ãƒ‡ãƒ¼ã‚¿å–å¾—ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™
4. **ç’°å¢ƒå¤‰æ•°**: æ©Ÿå¯†æƒ…å ±ã¯.envã§ç®¡ç†

## ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

### Phase 1ï¼ˆåˆæœŸï¼‰
- å˜ä¸€ã‚µãƒ¼ãƒãƒ¼
- JSON + Parquetã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
- æ‰‹å‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

### Phase 2ï¼ˆæ‹¡å¼µï¼‰
- PostgreSQL/MySQLå°å…¥
- Redis ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°
- è¤‡æ•°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹

### Phase 3ï¼ˆå¤§è¦æ¨¡ï¼‰
- Kubernetes ãƒ‡ãƒ—ãƒ­ã‚¤
- åˆ†æ•£ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼

## ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

- **ãƒ­ã‚°**: structlogã§JSONå½¢å¼ãƒ­ã‚°
- **ãƒ¡ãƒˆãƒªã‚¯ã‚¹**: Prometheusï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- **ã‚¢ãƒ©ãƒ¼ãƒˆ**: ãƒ¡ãƒ¼ãƒ«/Slacké€šçŸ¥

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™

- ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰: < 2ç§’
- ãƒ‡ãƒ¼ã‚¿æ›´æ–°: æ¯æ—¥1å›ï¼ˆ09:00 JSTï¼‰
- åŒæ™‚æ¥ç¶š: 10-50ãƒ¦ãƒ¼ã‚¶ãƒ¼
- ãƒ‡ãƒ¼ã‚¿ä¿æŒ: éå»3å¹´åˆ†

## ä»Šå¾Œã®æ‹¡å¼µ

- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾¡æ ¼æ›´æ–°
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªç®¡ç†
- [ ] ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆãƒ¡ãƒ¼ãƒ«/Slackï¼‰
- [ ] ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª
- [ ] REST APIæä¾›
- [ ] ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ UI
